type: custom:layout-card
layout_type: custom:grid-layout
layout: {}
cards:
  - type: custom:layout-card
    layout_type: custom:horizontal-layout
    layout: {}
    cards:
      - type: custom:mushroom-template-card
        primary: –ö–æ–º–Ω–∞—Ç—ã
        icon: mdi:mushroom
        icon_color: white
        card_mod:
          style: |
            ha-card {
              background: rgba(var(--rgb-card-background-color), 0.7) url( '/local/images/rooms.jpg' ) center no-repeat;
              background-size: cover;
              background-blend-mode: overlay;
            }
      - type: horizontal-stack
        cards:
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –ö–æ–º–Ω–∞—Ç–∞
                secondary: 'üå°Ô∏è {{ states(''sensor.climate_termo'') | round(0) }} ¬∞C'
                icon: mdi:laptop
                entity: light.komnata_osveshchenie
                tap_action:
                  action: navigate
                  navigation_path: room
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.lustra_v_komnate
                        state: 'on'
                    chip:
                      entity: light.lustra_v_komnate
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:ceiling-light
                  - type: conditional
                    conditions:
                      - entity: light.nochnik_v_komnate
                        state: 'on'
                    chip:
                      entity: light.nochnik_v_komnate
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:lamp
                  - type: conditional
                    conditions:
                      - entity: light.bra_v_komnate
                        state: 'on'
                    chip:
                      entity: light.bra_v_komnate
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:wall-sconce
                  - type: conditional
                    conditions:
                      - entity: light.lava_lampa
                        state: 'on'
                    chip:
                      entity: light.lava_lampa
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: lime
                      icon: mdi:lava-lamp
                  - type: conditional
                    conditions:
                      - entity: switch.10015c681a
                        state: 'on'
                    chip:
                      entity: switch.10015c681a
                      type: template
                      icon_color: blue
                      icon: mdi:desktop-tower
                      card_mod:
                        style: |
                          @keyframes shake {
                            0%, 100% { transform: translate(0, 0) rotate(0); }
                            20%  { transform: translate(0.4px, -0.4px) rotate(-4deg); }
                            40%  { transform: translate(-0.4px, 0.4px) rotate(4deg); }
                            60%  { transform: translate(0.4px, 0.4px) rotate(-4deg); }
                            80%  { transform: translate(-0.4px, -0.4px) rotate(4deg); }
                          }
                          @keyframes drum {
                            50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 34% 68%, 60% 41%, 71% 56%, 65% 74%, 47% 79%, 32% 69%, 35% 100%, 100% 100%, 100% 0); }
                          }
                          ha-card {
                            animation: shake linear infinite;
                            animation-duration: 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: media_player.xboxone
                        state: 'on'
                    chip:
                      entity: media_player.xboxone
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: green
                      icon: mdi:microsoft-xbox
                      card_mod:
                        style: |
                          @keyframes wave {
                            50% { transform: rotatey(180deg); --icon-color: rgb(var(--rgb-cyan)); }
                          }
                          .shape {
                            --shape-animation: color 6s ease infinite;
                          }
                          @keyframes color {
                            50% { --shape-color: rgba(var(--rgb-cyan), 0.2); }
                          }
                          ha-card {
                            animation: wave 6s ease infinite;
                          }
                  - type: conditional
                    conditions:
                      - entity: switch.zariadki_v_komnate
                        state: 'on'
                    chip:
                      entity: switch.zariadki_v_komnate
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: green
                      icon: mdi:battery-high
                      card_mod:
                        style: |
                          ha-card {
                            animation: charge 3s steps(1) infinite;
                          }
                          @keyframes charge {
                            0% { clip-path: polygon(0% 0%, 0% 100%, 34% 100%, 34% 24%, 67% 24%, 67% 84%, 34% 84%, 34% 100%, 100% 100%, 100% 0%); }
                            20% { clip-path: polygon(0% 0%, 0% 100%, 34% 100%, 34% 24%, 67% 24%, 67% 64%, 34% 64%, 34% 100%, 100% 100%, 100% 0%); }
                            40% { clip-path: polygon(0% 0%, 0% 100%, 34% 100%, 34% 24%, 67% 24%, 67% 44%, 34% 44%, 34% 100%, 100% 100%, 100% 0%); }
                            60% { clip-path: polygon(0% 0%, 0% 100%, 34% 100%, 34% 24%, 67% 24%, 67% 24%, 34% 24%, 34% 100%, 100% 100%, 100% 0%); }
                          }
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.komnata_osveshchenie', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –°–ø–∞–ª—å–Ω—è
                secondary: 'üå°Ô∏è {{ states(''sensor.climate_termo'') | round(0) }} ¬∞C'
                icon: mdi:bed-king
                entity: light.spalnia_svet
                tap_action:
                  action: navigate
                  navigation_path: bedroom
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.spalnia_svet
                        state: 'on'
                    chip:
                      entity: light.spalnia_svet
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:chandelier
                  - type: conditional
                    conditions:
                      - entity: light.nochnik_v_spalne
                        state: 'on'
                    chip:
                      entity: light.nochnik_v_spalne
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:wall-sconce
                  - type: conditional
                    conditions:
                      - entity: light.vykliuchatel_ploshchadka
                        state: 'on'
                    chip:
                      entity: light.vykliuchatel_ploshchadka
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:balcony
                  - type: conditional
                    conditions:
                      - entity: switch.rozetka_v_spalne
                        state: 'on'
                    chip:
                      entity: switch.rozetka_v_spalne
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: red
                      icon: mdi:iron
                      card_mod:
                        style: |
                          ha-card {
                            animation: vroom 2s ease-in-out infinite;
                          }
                          .shape {
                            clip-path: inset(0 0 0 0);
                          }
                          @keyframes vroom {
                            49% { opacity: 1;}
                            50% { transform: translate(-32px); opacity: 0; }
                            51% { transform: translate(32px); opacity: 0; }
                            52% { opacity: 1; }
                          }
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dd_ploshchadka_occupancy
                        state: 'on'
                    chip:
                      type: template
                      icon_color: green
                      icon: mdi:motion-sensor
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.spalnia_svet', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
      - type: horizontal-stack
        cards:
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –ö—É—Ö–Ω—è
                secondary: 'üå°Ô∏è {{ states(''sensor.climate_termo'') | round(0) }} ¬∞C'
                icon: mdi:silverware-fork-knife
                entity: light.kukhnia_gruppa
                tap_action:
                  action: navigate
                  navigation_path: kitchen
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.datchik_utechki_vody_water_leak
                        state: 'on'
                    chip:
                      type: template
                      icon_color: light-blue
                      icon: mdi:water-alert
                      tap_action:
                        action: more-info
                      entity: binary_sensor.datchik_utechki_vody_water_leak
                      card_mod:
                        style: |
                          ha-card {
                            animation: blink 1s linear infinite;
                          }
                          @keyframes blink {
                            50% {opacity: 0;}
                          }  
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.datchik_utechki_gaza_gas
                        state: 'on'
                    chip:
                      type: template
                      icon_color: red
                      icon: mdi:fire-alert
                      tap_action:
                        action: more-info
                      entity: binary_sensor.datchik_utechki_gaza_gas
                      card_mod:
                        style: |
                          ha-card {
                            animation: blink 1s linear infinite;
                          }
                          @keyframes blink {
                            50% {opacity: 0;}
                          }  
                  - type: conditional
                    conditions:
                      - entity: light.svetilnik_na_kukhne
                        state: 'on'
                    chip:
                      entity: light.svetilnik_na_kukhne
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:ceiling-light
                  - type: conditional
                    conditions:
                      - entity: light.podsvetka_na_kukhne
                        state: 'on'
                    chip:
                      entity: light.podsvetka_na_kukhne
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:countertop
                  - type: conditional
                    conditions:
                      - entity: input_boolean.chainik
                        state: 'on'
                    chip:
                      entity: input_boolean.chainik
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:kettle-steam
                      card_mod:
                        style: |
                          @keyframes boil {
                            0%, 100% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            10% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); clip-path: polygon(0 0, 66% 10%, 67% 30%, 88% 52%, 100% 100%, 0 100%); }
                            20% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            30% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            40% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            50% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            60% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            70% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            80% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            90% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                          }
                          ha-card {
                            animation: boil linear infinite;
                            animation-duration: 500ms;
                          }
                  - type: conditional
                    conditions:
                      - entity: switch.multivarka_rozetka
                        state: 'on'
                    chip:
                      entity: switch.multivarka_rozetka
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:pot-steam
                      card_mod:
                        style: |
                          @keyframes steam {
                            0%, 100% { clip-path: inset(0 0 0 0); }
                            50% { clip-path: inset(39% 0 0 0); }
                          }
                          ha-card {
                            animation: steam linear infinite;
                            animation-duration: 2s;
                          }
                  - type: conditional
                    conditions:
                      - entity: switch.kofevarka
                        state: 'on'
                    chip:
                      entity: switch.kofevarka
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:coffee-maker
                      card_mod:
                        style: |
                          @keyframes java {
                            0%, 80%, 100% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 0 100%); }
                            10% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 79%, 63% 76%, 67% 70%, 66% 54%, 42% 55%, 42% 70%, 47% 77%, 55% 80%, 57% 100%, 0 100%); }
                            15% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 79%, 63% 76%, 67% 70%, 66% 54%, 42% 54%, 42% 70%, 47% 77%, 55% 80%, 55% 100%, 0 100%); }
                            20% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 76%, 63% 76%, 67% 70%, 66% 54%, 42% 55%, 42% 70%, 47% 76%, 55% 76%, 57% 100%, 0 100%); }
                            25% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 76%, 63% 76%, 67% 70%, 66% 54%, 42% 54%, 42% 70%, 47% 76%, 55% 76%, 56% 100%, 0 100%); }
                            30% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 73%, 64% 73%, 66% 70%, 66% 55%, 42% 55%, 42% 69%, 44% 73%, 55% 73%, 57% 100%, 0 100%); }
                            35% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 73%, 64% 73%, 66% 70%, 66% 55%, 42% 54%, 42% 69%, 44% 73%, 55% 73%, 56% 100%, 0 100%); }
                            40% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 70%, 67% 70%, 66% 54%, 42% 54%, 42% 70%, 57% 70%, 57% 100%, 0 100%); }
                            45% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 70%, 67% 70%, 66% 54%, 42% 54%, 42% 70%, 55% 70%, 56% 100%, 0 100%); }
                            50% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 66%, 67% 65%, 66% 54%, 42% 54%, 42% 65%, 57% 65%, 57% 100%, 0 100%); }
                            55% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 66%, 67% 65%, 66% 54%, 42% 54%, 42% 65%, 55% 65%, 56% 100%, 0 100%); }
                            60% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 60%, 66% 60%, 66% 54%, 42% 54%, 42% 60%, 57% 60%, 57% 100%, 0 100%); }
                            65% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 60%, 66% 60%, 66% 54%, 42% 54%, 42% 60%, 55% 60%, 56% 100%, 0 100%); }
                            70% { clip-path: polygon(0 0, 100% 0, 100% 32%, 47% 32%, 47% 43%, 100% 43%, 100% 100%, 55% 100%, 55% 56%, 66% 56%, 66% 54%, 42% 54%, 42% 56%, 57% 56%, 57% 100%, 0 100%); }
                            75% { clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 55% 56%, 66% 56%, 66% 54%, 42% 54%, 42% 56%, 55% 56%, 55% 100%, 0 100%); }
                          }
                          ha-card {
                            animation: java 4s linear infinite;
                          }
                  - type: conditional
                    conditions:
                      - entity: switch.posudomoika
                        state: 'on'
                    chip:
                      entity: switch.posudomoika
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:dishwasher
                      card_mod:
                        style: |
                          @keyframes shake {
                            0%, 100% { transform: translate(0, 0) rotate(0); }
                            20%  { transform: translate(0.4px, -0.4px) rotate(-4deg); }
                            40%  { transform: translate(-0.4px, 0.4px) rotate(4deg); }
                            60%  { transform: translate(0.4px, 0.4px) rotate(-4deg); }
                            80%  { transform: translate(-0.4px, -0.4px) rotate(4deg); }
                          }
                          @keyframes drum {
                            50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 34% 68%, 60% 41%, 71% 56%, 65% 74%, 47% 79%, 32% 69%, 35% 100%, 100% 100%, 100% 0); }
                          }
                          ha-card {
                            animation: shake linear infinite;
                            animation-duration: 2s;
                          }
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dd_kukhnia_occupancy
                        state: 'on'
                    chip:
                      entity: binary_sensor.dd_kukhnia_occupancy
                      type: template
                      icon_color: green
                      icon: mdi:motion-sensor
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.kukhnia_gruppa', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –¢—É–∞–ª–µ—Ç
                secondary: 'üå°Ô∏è {{ states(''sensor.temperatura'') | round(0) }} ¬∞C'
                icon: mdi:toilet
                entity: light.tualet_osveshchenie
                tap_action:
                  action: navigate
                  navigation_path: toilet
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.svetilnik_v_tualete
                        state: 'on'
                    chip:
                      entity: light.svetilnik_v_tualete
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:ceiling-light
                  - type: conditional
                    conditions:
                      - entity: light.controller_dimmable_6edba1
                        state: 'on'
                    chip:
                      entity: light.controller_dimmable_6edba1
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:toilet
                  - type: conditional
                    conditions:
                      - entity: light.svetilnik_v_garderobe
                        state: 'on'
                    chip:
                      entity: light.svetilnik_v_garderobe
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:hanger
                  - type: conditional
                    conditions:
                      - entity: switch.rele_tualet
                        state: 'on'
                    chip:
                      entity: switch.rele_tualet
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:fan
                      card_mod:
                        style: |
                          @keyframes rotation {
                            0% {
                              transform: rotate(0deg);
                            }
                            100% {
                              transform: rotate(360deg);
                            }
                          }
                          ha-card {
                            animation: rotation linear infinite;
                            animation-duration: 2s;
                          }
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dd_tualet_occupancy
                        state: 'on'
                    chip:
                      type: template
                      icon_color: green
                      icon: mdi:motion-sensor
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.tualet_osveshchenie', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
      - type: horizontal-stack
        cards:
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –í–∞–Ω–Ω–∞—è
                secondary: üå°Ô∏è {{ states('sensor.dtv_temperature') | round(0) }} ¬∞C
                icon: mdi:bathtub
                entity: light.vannaia_svet
                tap_action:
                  action: navigate
                  navigation_path: bath
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.vannaia_svet
                        state: 'on'
                    chip:
                      entity: light.vannaia_svet
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:ceiling-light
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dd_vannaia_occupancy
                        state: 'on'
                    chip:
                      entity: binary_sensor.dd_vannaia_occupancy
                      type: template
                      icon_color: green
                      icon: mdi:motion-sensor
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.vannaia_svet', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –ü—Ä–∏—Ö–æ–∂–∞—è
                secondary: 'üå°Ô∏è {{ states(''sensor.dtv_temperature'') | round(0) }} ¬∞C'
                icon: mdi:shoe-print
                entity: light.prikhozhaia_osveshchenie
                tap_action:
                  action: navigate
                  navigation_path: hall
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.scet_v_prihozhei
                        state: 'on'
                    chip:
                      entity: light.scet_v_prihozhei
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:ceiling-light
                  - type: conditional
                    conditions:
                      - entity: light.nochnik_v_prikhozhei
                        state: 'on'
                    chip:
                      entity: light.nochnik_v_prikhozhei
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:wall-sconce
                  - type: conditional
                    conditions:
                      - entity: light.svet_na_lestnice
                        state: 'on'
                    chip:
                      entity: light.svet_na_lestnice
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:stairs-up
                  - type: conditional
                    conditions:
                      - entity: light.svet_v_chulane
                        state: 'on'
                    chip:
                      entity: light.svet_v_chulane
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:lightbulb-on
                  - type: conditional
                    conditions:
                      - entity: light.svet_v_koridore
                        state: 'on'
                    chip:
                      entity: light.svet_v_koridore
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:door
                      card_mod:
                        style: |
                            ha-card {
                              animation: open 6s ease-in-out infinite;
                              transform-origin: 30%;
                            }
                            @keyframes open {
                              0%, 66% { transform: rotateY(0deg); }
                              33% { transform: rotateY(-120deg); }
                            }
                            .shape {
                              perspective: 45px;
                            }
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dd_prikhozhaia_occupancy
                        state: 'on'
                    chip:
                      type: template
                      icon_color: green
                      icon: mdi:motion-sensor
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.prikhozhaia_osveshchenie', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
      - type: horizontal-stack
        cards:
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –ó–∞–ª
                secondary: üå°Ô∏è {{ states('sensor.climate_termo') | round(0) }} ¬∞C
                icon: mdi:chandelier
                entity: light.zal_osveshchenie
                tap_action:
                  action: navigate
                  navigation_path: living
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.zal_osveshchenie
                        state: 'on'
                    chip:
                      entity: light.zal_osveshchenie
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:chandelier
                  - type: conditional
                    conditions:
                      - entity: switch.rozetka_zal
                        state: 'on'
                    chip:
                      entity: switch.rozetka_zal
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:power-socket-de
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.zal_osveshchenie', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –î–µ—Ç—Å–∫–∞—è
                secondary: 'üå°Ô∏è {{ states(''sensor.climate_termo'') | round(0) }} ¬∞C'
                icon: mdi:teddy-bear
                entity: light.detskaia
                tap_action:
                  action: navigate
                  navigation_path: children
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: light.svet_v_detskoi
                        state: 'on'
                    chip:
                      entity: light.svet_v_detskoi
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:chandelier
                  - type: conditional
                    conditions:
                      - entity: light.nochnik_v_detskoi
                        state: 'on'
                    chip:
                      entity: light.nochnik_v_detskoi
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:wall-sconce
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.dd_detskaia_occupancy
                        state: 'on'
                    chip:
                      type: template
                      icon_color: green
                      icon: mdi:motion-sensor
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('light.detskaia', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
      - type: horizontal-stack
        cards:
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –ë–∞–Ω—è
                secondary: üå°Ô∏è {{ states('sensor.banya_temperature_2') | round(0) }} ¬∞C
                icon: mdi:home-thermometer
                entity: switch.bania
                tap_action:
                  action: navigate
                  navigation_path: sauna
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: switch.bania
                        state: 'on'
                    chip:
                      entity: switch.bania
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:flash
                  - type: conditional
                    conditions:
                      - entity: light.banya
                        state: 'on'
                    chip:
                      entity: light.banya
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:lightbulb-on
                      card_mod:
                        style: |
                            ha-card {
                              animation: eureka 1.8s infinite;
                            }
                            @keyframes eureka {
                              0%, 45%, 55%, 100% { transform: translateY(0) scale(1); clip-path: polygon(20% 100%, 21% 38%, 36% 22%, 62% 21%, 79% 37%, 80% 100%, 53% 100%, 55% 67%, 62% 62%, 66% 55%, 67% 46%, 62% 38%, 55% 34%, 47% 34%, 39% 37%, 34% 44%, 33% 53%, 36% 60%, 41% 64%, 45% 66%, 45% 76%, 56% 76%, 54% 100%); }
                              10%, 40% { transform: translateY(-5px) scale(1.12); clip-path: inset(0 0 0 0); }
                              50% { transform: translateY(-2px) }
                            }
                  - type: conditional
                    conditions:
                      - entity: switch.voda_v_baniu
                        state: 'on'
                    chip:
                      entity: switch.voda_v_baniu
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:water-pump
                      card_mod:
                        style: |
                            ha-card {
                              animation: drip 2s infinite; 
                            }
                            @keyframes drip {
                              0%, 100% { clip-path: inset(0 0 0 0); }
                              15%, 85% { clip-path: polygon(0 0, 100% 0, 100% 57%, 64% 57%, 64% 100%, 0 100%); }
                            }
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('switch.bania', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: –ë–µ—Å–µ–¥–∫–∞
                secondary: |
                  {{ 
                  "üå°Ô∏è " ~ state_attr('weather.dom', 'temperature') | round(0) ~ " ¬∞C" 
                  if is_state("sensor.temperatura_besedka", "unavailable") 
                  else 
                  "üå°Ô∏è " ~ states("sensor.temperatura_besedka") | round(0) ~ " ¬∞C" 
                  }}
                icon: mdi:greenhouse
                entity: switch.besedka
                tap_action:
                  action: navigate
                  navigation_path: alcove
                hold_action:
                  action: toggle
                icon_color: '{{ ''amber'' if is_state(entity, ''on'') else ''disabled'' }}'
                fill_container: true
                layout: horizontal
                multiline_secondary: false
                card_mod:
                  style: |
                    :host([dark-mode]) {
                      background: rgba(var(--rgb-primary-background-color), 0.2);
                    } 
                    :host {
                      background: rgba(var(--rgb-primary-text-color), 0.025);
                      --mush-icon-size: 76px;
                      height: 66px;
                      margin-left: -18px !important;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: switch.besedka
                        state: 'on'
                    chip:
                      entity: switch.besedka
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:flash
                      card_mod:
                        style: |
                            ha-card {
                              animation: flash 4s linear infinite;
                            }
                            @keyframes flash {
                              0%, 4%, 8%, 12%, 16%, 20%, 24%, 28%, 32%, 100% { transform: translate(0px,0px); }
                              2% { transform: translate(-0.3px, 0px); }
                              6% { transform: translate(0.3px, 0px); }
                              10% { transform: translate(-0.2px, 0px); }
                              14% { transform: translate(0.2px, 0px); }
                              18% { transform: translate(-0.2px, 0px); }
                              22% { transform: translate(0.5px, 0px); }
                              26% { transform: translate(-0.5px, 0px); }
                              34% { transform: translate(-1px, 5px); --icon-color: rgb(var(--rgb-amber)); }
                              38% { transform: translate(0px, 0px); --icon-color: rgb(var(--rgb-white)); }
                              40% { --icon-color: rgb(var(--rgb-amber)); }
                            }
                  - type: conditional
                    conditions:
                      - entity: light.besedka
                        state: 'on'
                    chip:
                      entity: light.besedka
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:lightbulb-on
                      card_mod:
                        style: |
                            ha-card {
                              animation: eureka 1.8s infinite;
                            }
                            @keyframes eureka {
                              0%, 45%, 55%, 100% { transform: translateY(0) scale(1); clip-path: polygon(20% 100%, 21% 38%, 36% 22%, 62% 21%, 79% 37%, 80% 100%, 53% 100%, 55% 67%, 62% 62%, 66% 55%, 67% 46%, 62% 38%, 55% 34%, 47% 34%, 39% 37%, 34% 44%, 33% 53%, 36% 60%, 41% 64%, 45% 66%, 45% 76%, 56% 76%, 54% 100%); }
                              10%, 40% { transform: translateY(-5px) scale(1.12); clip-path: inset(0 0 0 0); }
                              50% { transform: translateY(-2px) }
                            }
                  - type: conditional
                    conditions:
                      - entity: light.svet_v_besedke
                        state: 'on'
                    chip:
                      entity: light.svet_v_besedke
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: amber
                      icon: mdi:ceiling-light
                  - type: conditional
                    conditions:
                      - entity: switch.samovar
                        state: 'on'
                    chip:
                      entity: switch.samovar
                      tap_action:
                        action: toggle
                      type: template
                      icon_color: blue
                      icon: mdi:kettle-steam
                      card_mod:
                        style: |
                          @keyframes boil {
                            0%, 100% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            10% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); clip-path: polygon(0 0, 66% 10%, 67% 30%, 88% 52%, 100% 100%, 0 100%); }
                            20% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            30% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            40% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            50% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            60% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            70% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            80% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                            90% { transform: translate({{ range(-20, 20) | random / 10 }}px, {{ range(-20, 20) | random / 10 }}px) rotate({{ range(-15, 15) | random }}deg); }
                          }
                          ha-card {
                            animation: boil linear infinite;
                            animation-duration: 500ms;
                          }
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                      --chip-spacing: 0;
                    } 
            card_mod:
              style: |
                ha-card {
                  height: 102px;
                  {% if is_state('switch.besedka', 'on') %}
                    background: rgba(255, 152, 0, 0.1);
                  {% endif %}
                }
